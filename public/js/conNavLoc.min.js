{$(document.body).css("--menu-cnt",$(".mynav>.mynavline>.mymenubar>.mymenuli").length);let mynav=document.getElementsByClassName("mynav")[0];mynav.style.opacity=1;let linkHrefs={};let links=mynav.getElementsByTagName("a");for(let i=0;i<links.length;++i){linkHrefs[i]=links[i].href;links[i].href="javascript:void(0);";links[i].addEventListener("click",(function(){menuClick(i)}));links[i].setAttribute("onclick",`menuClick(${i});`)}function menuClick(index){if(mynav.offsetTop===0){window.location.href=linkHrefs[index]}}window.addEventListener("touchstart",(function(){}),true);let locPrefix="当前位置: ";let locDOM=document.getElementsByClassName("myloc")[0];let locLinkDOM=document.getElementById("loclink");let locLink_full=locLinkDOM.innerHTML.replace(locPrefix,"").trim();let locList=locLink_full.split(" &gt; ");function locRedraw(){locLinkDOM.innerHTML=locPrefix+locLink_full;if(checkLocLength()){for(let i=0;i<locList.length;++i){if(!i){locLinkDOM.innerHTML=""}else{locLinkDOM.innerHTML=locList[i-1].replace(/(<a.*>).*(<\/a>)/g,"$1...$2")}for(let j=i;j<locList.length;++j){locLinkDOM.innerHTML+=(j?" &gt; ":"")+locList[j]}if(!checkLocLength())break}}}function checkLocLength(){return locDOM.offsetWidth>window.innerWidth}window.addEventListener("resize",locRedraw);locRedraw();locDOM.style.opacity="1";locDOM.style.left="0"}
